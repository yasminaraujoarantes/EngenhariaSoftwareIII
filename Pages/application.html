<!doctype HTML>
<html>
<script src="https://aframe.io/releases/0.9.2/aframe.min.js"></script>
<script src="https://raw.githack.com/jeromeetienne/AR.js/1.7.5/aframe/build/aframe-ar.js"></script>
<body style="margin: 0px; overflow: hidden;">

<script>
let markerVisible = { "m0": false, "m1": false, "m2": false, "m3": false, "urso": false};

AFRAME.registerComponent('registerevents', {
    init: function () 
    {
        let marker = this.el;

        marker.addEventListener('markerFound', function() {
            markerVisible[ marker.id ] = true;
            // console.log( markerVisible );
        });

        marker.addEventListener('markerLost', function() {
            markerVisible[ marker.id ] = false;
            // console.log( markerVisible );
        });

    }
});

AFRAME.registerComponent('run', 
{   
    init: function()
    {
         entityEl = document.querySelector("#urso");
    },
    
    tick: function (time, deltaTime) 
    {
      
        if (markerVisible["m0"] && markerVisible["m1"] && markerVisible["m2"] && markerVisible["m3"]){
	        entityEl.object3D.visible = true ;
          console.log("Parab√©ns"); 
       }else {
	        entityEl.object3D.visible = false ;
          console.log("Tente novamente"); 
	}
    }
});

</script>

<a-scene embedded vr-mode-ui="enabled: false;" arjs="debugUIEnabled: false; detectionMode: mono_and_matrix; matrixCodeType: 3x3;">

    <a-marker preset="pattern"
        type="pattern"
        url="https://raw.githubusercontent.com/yasminaraujoarantes/EngenhariaSoftwareIII/master/Markers/pattern-U.patt" id="m0" registerevents>
         <a-entity
          gltf-model="url(https://raw.githubusercontent.com/yasminaraujoarantes/EngenhariaSoftwareIII/master/Models/UU.gltf)"
          position="1 1 0"
          scale="0.1 0.1 0.1"
          rotation="-90 0 0"
        >
        </a-entity>
    </a-marker>

    <a-marker preset="pattern"
        type="pattern"
        url="https://raw.githubusercontent.com/yasminaraujoarantes/EngenhariaSoftwareIII/master/Markers/pattern-R.patt" id="m1" registerevents>
        <a-entity
          gltf-model="url(https://raw.githubusercontent.com/yasminaraujoarantes/EngenhariaSoftwareIII/master/Models/RR.gltf)"
          position="1 1 0"
          scale="0.1 0.1 0.1"
          rotation="-90 0 0"
        >
        </a-entity>
    </a-marker>
  
  <a-marker preset="pattern"
        type="pattern"
        url="https://raw.githubusercontent.com/yasminaraujoarantes/EngenhariaSoftwareIII/master/Markers/pattern-S.patt" id="m2" registerevents>
        <a-entity
          gltf-model="url(https://raw.githubusercontent.com/yasminaraujoarantes/EngenhariaSoftwareIII/master/Models/SS.gltf)"
          position="1 1 0"
          scale="0.1 0.1 0.1"
          rotation="-90 0 0"
        >
        </a-entity>
    </a-marker>
  
    <a-marker preset="pattern"
        type="pattern"
        url="https://raw.githubusercontent.com/yasminaraujoarantes/EngenhariaSoftwareIII/master/Markers/pattern-O.patt" id="m3" registerevents>
        <a-entity
          gltf-model="url(https://raw.githubusercontent.com/yasminaraujoarantes/EngenhariaSoftwareIII/master/Models/OO.gltf)"
          position="1 1 0"
          scale="0.1 0.1 0.1"
          rotation="-90 0 0"
        >
        </a-entity>
    </a-marker>

     <a-marker preset="pattern"
        type="pattern"
        url="https://raw.githubusercontent.com/yasminaraujoarantes/EngenhariaSoftwareIII/master/Markers/pattern-fa10280d3e8c9070cc6d6199be583310.patt" id="urso" registerevents>
     <a-entity
          gltf-model="url(https://raw.githubusercontent.com/yasminaraujoarantes/EngenhariaSoftwareIII/master/Models/BlackBear.gltf)"
          position="1 1 0"
          scale="0.1 0.1 0.1"
          rotation="-90 0 0"
       >
      </a-entity>
    </a-marker>

    <a-entity camera></a-entity>

    <a-entity run></a-entity>


</a-scene>
</body>
</html>
